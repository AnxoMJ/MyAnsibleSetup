---
- name: Updates all packages
  hosts: all
  tasks:
     - name: Update cache and apps
       pacman:
        update_cache: yes
        upgrade: yes
     - name: Removes unused packages dependencies
       ansible.builtin.command: pacman -Rcs $(pacman -Qdtq)
     - name: Reboots if is needed
       script: ../scripts/rebootIfNeeded.sh
       register: output_shell
     - name: print output_shell
       ansible.builtin.debug:
        var: output_shell